spec:

  templates:

  - name: train-model
    parent: generic-task

    inputs:

      parameters:
      - name: docker-image
        value: z-ml
      - name: docker-tag
        value: latest

      - name: model_name

      - name: command
        value: python3 main.py

      artifacts:
      - name: main-script
        path: /app/main.py
        raw:
          data: |
            from skl.utils import save_json 
            from skl.functions import train_model
            import json

            model_name = {{inputs.parameters.model_name}}

            predictions, score = train_model(model_name)
            result = {}
            result["predictions"] = predictions
            result["score"] = score
            save_json(result, 'result.json')
  
    outputs:
      artifacts:
      - name: result
        path: /app/result.json
